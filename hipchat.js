// Generated by CoffeeScript 1.4.0
(function() {
  var hipchat, request, _,
    __slice = [].slice;

  request = require("request");

  _ = require('underscore')._;

  hipchat = {
    call: function() {
      var args, baseUrl, method, token;
      baseUrl = arguments[0], token = arguments[1], method = arguments[2], args = 4 <= arguments.length ? __slice.call(arguments, 3) : [];
      return hipchat[method].apply(hipchat, [baseUrl, token].concat(__slice.call(args)));
    },
    get: function(baseUrl, token, path, qs, cb) {
      if (cb == null) {
        cb = function() {};
      }
      qs = _.defaults({
        auth_token: token
      }, qs);
      return request.get("" + baseUrl + path, {
        qs: qs
      }, function(err, response, body) {
        return cb(err, JSON.parse(body));
      });
    },
    post: function(baseUrl, token, path, data, cb) {
      var form;
      if (cb == null) {
        cb = function() {};
      }
      form = _.defaults({
        auth_token: token
      }, data);
      return request.post("" + baseUrl + path, {
        form: form
      }, function(err, response, body) {
        return cb(err, JSON.parse(body));
      });
    }
  };

  module.exports = hipchat;

}).call(this);
